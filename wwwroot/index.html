<!DOCTYPE html>
<html>
<head>
<title>Quiz Game</title>
<script type="text/javascript">
function joinGame() { 

	// Sending and receiving data in JSON format using POST method
	// https://stackoverflow.com questions/24468459/sending-a-json-to-server-and-retrieving-a-json-in-return-without-jquery	

    let result = document.querySelector('.result'); 
    let name = document.querySelector('#name'); 
    let accesscode = document.querySelector('#accesscode');

	var xhr = new XMLHttpRequest();
	//var url = "http://localhost:8080/joingame";
	var url = "/joingame";

	xhr.open("POST", url, true);
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.onreadystatechange = function () {
    	if (xhr.readyState === 4 && xhr.status === 200) {
    		result.innerHTML = this.responseText; 
        	var json = JSON.parse(xhr.responseText);
        	console.log(json.Name + ", " + json.AccessCode);
    	}
	};
	//var data = JSON.stringify({"AccessCode": "ESE0", "Name": "Bob"});
    var data = JSON.stringify({ "AccessCode": accesscode.value, "Name": name.value }); 
	xhr.send(data);
	alert(data)
}
</script>
</head>
<body>
<h1>Quiz game!</h1>
<h5>version 2</h5>
<p class="topmenu">
	<a href="javascript:startGame();">Start a game</a>&nbsp;&nbsp;&nbsp;
	<a href="javascript:joinGame();">Join a game</a>
</p>
<p class="scores"></p>	
<p class="result">
        <!-- Making a text input -->
        <input type="text" id="name" placeholder="Your name"> 
        <input type="text" id="accesscode" placeholder="Access code"> 
          
        <!-- Button to send data -->
        <button onclick="joinGame()">Join Game!</button> 
  
      <!-- For printing result from server -->
      <!-- <p class="result" style="color:green"></p> -->
      
   </p> 
</body>
</html>